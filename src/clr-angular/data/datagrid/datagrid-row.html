<!--
  ~ Copyright (c) 2016-2018 VMware, Inc. All Rights Reserved.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->

<div class="datagrid-row-master datagrid-row-flex">
    <div class="datagrid-row-sticky">
        <clr-dg-cell *ngIf="selection.selectionType === SELECTION_TYPE.Multi"
                     class="datagrid-select datagrid-fixed-column">
            <clr-checkbox [clrChecked]="selected" (clrCheckedChange)="toggle($event)"></clr-checkbox>
        </clr-dg-cell>
        <clr-dg-cell *ngIf="selection.selectionType === SELECTION_TYPE.Single"
                     class="datagrid-select datagrid-fixed-column">
            <div class="radio">
                <input type="radio" [id]="id" [name]="selection.id + '-radio'" [value]="item"
                       [(ngModel)]="selection.currentSingle" [checked]="selection.currentSingle === item">
                <label for="{{id}}"></label>
            </div>
        </clr-dg-cell>
        <clr-dg-cell *ngIf="rowActionService.hasActionableRow"
                     class="datagrid-row-actions datagrid-fixed-column">
            <ng-content select="clr-dg-action-overflow"></ng-content>
        </clr-dg-cell>
        <clr-dg-cell *ngIf="globalExpandable.hasExpandableRow"
                     class="datagrid-expandable-caret datagrid-fixed-column">
            <ng-container *ngIf="expand.expandable">
                <button (click)="toggleExpand()" *ngIf="!expand.loading" type="button"
                        class="datagrid-expandable-caret-button">
                    <clr-icon shape="caret" [attr.dir]="expand.expanded?'down':'right'"
                              class="datagrid-expandable-caret-icon"></clr-icon>
                </button>
                <div class="spinner spinner-sm" *ngIf="expand.loading"></div>
            </ng-container>
        </clr-dg-cell>
        <div #stickyCells></div> <!-- placeholder for projecting other sticky cells as pinned-->
    </div>
    <div class="datagrid-row-scrollable">
        <!-- TODO - fix this for replaced cells -->
        <!--<div class="datagrid-scrolling-cells" *ngIf="(!expand.expanded) || (expand.expanded && !expand.replace)">-->
        <div class="datagrid-scrolling-cells">
            <ng-container #scrollableCells></ng-container>
        </div>
        <ng-content select="clr-dg-row-detail"></ng-content>
    </div>
</div>

<ng-container #calculatedCells></ng-container>